{"version":3,"sources":["uni-app:///main.js","webpack:///F:/Users/litiewang/Documents/HBuilderProjects/xi/pages/read/localread.vue?cb3f","webpack:///F:/Users/litiewang/Documents/HBuilderProjects/xi/pages/read/localread.vue?31be","webpack:///F:/Users/litiewang/Documents/HBuilderProjects/xi/pages/read/localread.vue?0531","webpack:///F:/Users/litiewang/Documents/HBuilderProjects/xi/pages/read/localread.vue?0b93","uni-app:///pages/read/localread.vue","webpack:///F:/Users/litiewang/Documents/HBuilderProjects/xi/pages/read/localread.vue?798c","webpack:///F:/Users/litiewang/Documents/HBuilderProjects/xi/pages/read/localread.vue?70a5"],"names":["createPage","Page"],"mappings":"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,EAuIA;AACA,4BAxIA,EAwIA;AACA,oBAzIA;;AA2IA,GAjJA;AAkJA,QAlJA,kBAkJA,GAlJA,EAkJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GA5JA;AA6JA,UA7JA,sBA6JA;;;;;AAKA;AACA,GAnKA;AAoKA,QApKA,oBAoKA;AACA;AACA,GAtKA;AAuKA,SAvKA,qBAuKA,EAvKA;AAwKA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA,EAxKA;;AAiLA;AACA,cADA,wBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA;AACA;AACA,6BADA;AAEA,oDAFA;AAGA,iCAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3BA;;AA6BA;;;AAGA,QAhCA,kBAgCA;AACA;AACA,KAlCA;;AAoCA;;;AAGA,iBAvCA,2BAuCA;AACA,6BADA,CACA,WADA,yBACA,WADA,CACA,YADA,yBACA,YADA,CACA,eADA,yBACA,eADA,CACA,QADA,yBACA,QADA,CACA,UADA,yBACA,UADA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,KAHA;;AAKA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;;AAMA;AACA;AACA;AACA,KAtIA;;AAwIA;;;AAGA,YA3IA,sBA2IA;AACA,6KADA;AAEA,qCAFA;AAGA,2CAHA;AAIA;AACA;AACA,iBANA;AAOA,qEAPA;AAQA,oBARA,GAQA,uEARA;AASA,sCATA;AAUA,KArJA;;AAuJA;;;AAGA,cA1JA,wBA0JA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAPA,MAOA;AACA;AACA;AACA;AACA;AACA,kBADA,CACA,UADA;AAEA,8BAFA,CAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,aAbA;AAcA,gBAdA;AAeA,WAjBA;AAkBA,SAnBA;AAoBA;AACA,KAxLA;;AA0LA;;;AAGA,kBA7LA,4BA6LA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA,CACA,aADA;AAEA,4BAFA,CAEA;AACA;;;AAGA;;AAEA;AACA,2CAPA,CAOA;AACA;AACA,WAXA;AAYA,cAZA;AAaA,SAfA,EAeA,GAfA;AAgBA,OAlBA;AAmBA,KAjNA;;AAmNA;;;AAGA,kBAtNA,4BAsNA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA,CACA,aADA;AAEA,4BAFA,CAEA;AACA;;AAEA;;AAEA;AACA,2CANA,CAMA;AACA;AACA;AACA,gCAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAtBA;AAuBA,cAvBA;AAwBA,SA1BA,EA0BA,GA1BA;AA2BA,OA7BA;AA8BA,KArPA;;AAuPA;;;AAGA,mBA1PA,6BA0PA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA,CACA,cADA;AAEA,4BAFA,CAEA;AACA;;AAEA;;AAEA;AACA,4CANA,CAMA;AACA;AACA;AACA,gCAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAtBA;AAuBA,cAvBA;AAwBA,SA1BA,EA0BA,GA1BA;AA2BA,OA7BA;AA8BA,KAzRA;;AA2RA;;;AAGA,mBA9RA,2BA8RA,CA9RA,EA8RA;AACA,iCADA,CACA;AACA;AACA;AACA;AACA;AACA,KApSA;;AAsSA;;;AAGA,kBAzSA,0BAySA,CAzSA,EAySA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAdA,MAcA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,sBAFA;;AAIA;AACA,KAvWA;;AAyWA;;;AAGA,iBA5WA,yBA4WA,CA5WA,EA4WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,wBAFA;;AAIA,SANA,MAMA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA,OAfA,MAeA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnZA;;AAqZA;;;AAGA,oBAxZA,8BAwZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhaA;;AAkaA;;;AAGA,cAraA,sBAqaA,CAraA,EAqaA;AACA;AACA;AACA;AACA;AACA;AACA,KA3aA;;AA6aA;;;AAGA,aAhbA,qBAgbA,CAhbA,EAgbA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAdA,MAcA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,0BAFA;;AAIA;AACA;AACA;AACA,WAXA,MAWA;AACA;AACA;AACA;AACA;AACA,SAlBA,MAkBA;AACA;AACA;AACA,yCADA;AAEA,qDAFA;AAGA,uCAHA;AAIA,sBAJA;AAKA,iDALA;AAMA,mHANA;AAOA,6CAPA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA;AACA;AACA,SAXA,MAWA;AACA;AACA;AACA,wCADA;AAEA,oDAFA;AAGA,sCAHA;AAIA,kDAJA;AAKA,gDALA;AAMA,oJANA;AAOA,4CAPA;;AASA;AACA;AACA;AACA;AACA;AACA,KArjBA;;AAujBA;;;AAGA,YA1jBA,oBA0jBA,CA1jBA,EA0jBA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OAZA,MAYA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArmBA;;AAumBA;;;AAGA,eA1mBA,yBA0mBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApnBA;;AAsnBA;;;AAGA,YAznBA,sBAynBA;;;;AAIA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KAjoBA;;AAmoBA;;;AAGA,aAtoBA,uBAsoBA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,GAHA;AAIA,KAjpBA;;AAmpBA;;;AAGA,eAtpBA,yBAspBA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KA3pBA;;AA6pBA;;;AAGA,iBAhqBA,2BAgqBA;;;;AAIA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KAzqBA;;AA2qBA;;;AAGA,iBA9qBA,yBA8qBA,CA9qBA,EA8qBA;AACA;AACA;AACA,KAjrBA;;AAmrBA;;;AAGA,eAtrBA,uBAsrBA,CAtrBA,EAsrBA;AACA;AACA;AACA,8BADA,IAFA;;AAKA,yDALA;AAMA;AACA;AACA,kCARA;AASA,KA/rBA;;AAisBA;;;AAGA,aApsBA,uBAosBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,oBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAXA,EAWA,EAXA;AAYA,KA9uBA;;AAgvBA;;;AAGA,cAnvBA,wBAmvBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,oBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAXA,EAWA,EAXA;AAYA,KAtyBA;;AAwyBA;;;AAGA,iBA3yBA,yBA2yBA,IA3yBA,EA2yBA;AACA,+BADA;AAEA;AACA,4EAHA;AAIA,oFAJA;AAKA;AACA;AACA,8BADA;AAEA,mEAFA;AAGA,8FAHA,GANA;;AAWA,6GAXA;AAYA;AACA;AACA,0CAdA;;AAgBA,mEAhBA;;;AAmBA,8BAnBA;AAoBA;AACA,2EArBA;AAsBA,qDAtBA;AAuBA;AACA,8BADA;AAEA,mEAFA;AAGA,8FAHA,GAvBA;;AA4BA,6GA5BA;AA6BA;AACA;AACA,yCA/BA;;AAiCA,oEAjCA;;;AAoCA,KA/0BA;;AAi1BA;;;AAGA,iBAp1BA,2BAo1BA;AACA;AACA;AACA,2BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA,0BADA;;AAGA;AACA;AACA,KAx2BA;;AA02BA;;;AAGA,gBA72BA,wBA62BA,IA72BA,EA62BA;AACA;AACA;AACA,wBADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA,0BADA;;AAGA;AACA;AACA,KAj4BA;;AAm4BA;;;AAGA,YAt4BA,oBAs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","file":"pages/read/localread.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/read/localread.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./localread.vue?vue&type=template&id=07d3c301&scoped=true&\"\nvar renderjs\nimport script from \"./localread.vue?vue&type=script&lang=js&\"\nexport * from \"./localread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./localread.vue?vue&type=style&index=0&id=07d3c301&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07d3c301\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/read/localread.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./localread.vue?vue&type=template&id=07d3c301&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = JSON.stringify(_vm.item)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./localread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./localread.vue?vue&type=script&lang=js&\"","<!-- 搜‘根据需要更改’，需要根据实际项目更改的已经列出来了 -->\r\n<!-- 重要事项：\r\n\t1.由于阅读页截取整行的需要，请确保文本格式和本插件中的text变量所示一致，即：！！！每一行的高度要一致！！！\r\n\t  如果要加内容，例如每一章开头加上章节名:'<h1>章节名</h1>',请确保所加的内容是单行高度的整数倍！！\r\n\t2.‘仅用于计算’的样式必须和阅读页样式一致，不然显示会有问题,\r\n\t3.字体必须是偶数，否则1.5倍行距的时候会无法截取到整行\r\n -->\r\n<template>\r\n\t<view style=\"height: 100%;\">\r\n\t\t<view v-if=\"!curPage.text\" style=\"z-index: 999;position: absolute;top: 0;bottom: 0;left: 0;right: 0;display: flex;justify-content: center;align-items: center;\">\r\n\t\t\t正在加载阅读器...\r\n\t\t</view>\r\n\t\t<!-- 仅用于计算（结构和样式请和阅读页一致） -->\r\n\t\t<view class=\"container hidden\">\r\n\t\t\t<view class=\"chapter\">章节名</view>\r\n\t\t\t<view id=\"content\" class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{ height: `${innerHeight}px` }\">\r\n\t\t\t\t\t<view class=\"book-inner\" id=\"preChapter\" v-html=\"preChapter.text\" :style=\"{ fontSize: `${fontSize}px`, lineHeight: `${lineHeight * fontSize}px` }\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">显示电量、页码</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"container hidden\">\r\n\t\t\t<view class=\"chapter\">章节名</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{ height: `${innerHeight}px` }\">\r\n\t\t\t\t\t<view class=\"book-inner\" id=\"curChapter\" v-html=\"curChapter.text\" :style=\"{ fontSize: `${fontSize}px`, lineHeight: `${lineHeight * fontSize}px` }\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">显示电量、页码</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"container hidden\">\r\n\t\t\t<view class=\"chapter\">章节名</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{ height: `${innerHeight}px` }\">\r\n\t\t\t\t\t<view class=\"book-inner\" id=\"nextChapter\" v-html=\"nextChapter.text\" :style=\"{ fontSize: `${fontSize}px`, lineHeight: `${lineHeight * fontSize}px` }\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">显示电量、页码</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- ************************** -->\r\n\t\t<!--     根据需要更改（封面）     -->\r\n\t\t<!-- ************************** -->\r\n\t\t<!-- 封面 -->\r\n\t\t<view\r\n\t\t\tclass=\"cover container\"\r\n\t\t\t:class=\"{ container0: background === 1, container1: background === 2 }\"\r\n\t\t\t:style=\"{\r\n\t\t\t\tzIndex: 201,\r\n\t\t\t\ttransform: `translate${cover.pageTranslate[turnType]}`,\r\n\t\t\t\ttransition: `transform ${showAnimation ? turnPageTime : 0}s`,\r\n\t\t\t\tboxShadow: showShadow && turnType === 0 ? '0 0 10px 0 rgba(0,0,0,.4)' : ''\r\n\t\t\t}\"\r\n\t\t\t@touchstart=\"coverTouchStart\"\r\n\t\t\t@touchend=\"coverTouchEnd\"\r\n\t\t\t@touchmove=\"coverTouchMove\"\r\n\t\t\t@touchcancel=\"coverTouchcancel\"\r\n\t\t>\r\n\t\t\t<image></image>\r\n\t\t\t<view>{{ bookName }}</view>\r\n\t\t</view>\r\n\t\t<!-- ************************** -->\r\n\t\t<!--****************************-->\r\n\t\t<!-- ************************** -->\r\n\r\n\t\t<!-- 阅读页（结构和样式请和仅用于计算元素一致） -->\r\n\t\t<!-- 上一页 -->\r\n\t\t<view\r\n\t\t\tclass=\"container\"\r\n\t\t\t:class=\"{ container0: background === 1, container1: background === 2 }\"\r\n\t\t\t:style=\"{\r\n\t\t\t\tzIndex: 102,\r\n\t\t\t\ttransform: `translate${prePage.pageTranslate[turnType]}`,\r\n\t\t\t\ttransition: `transform ${showAnimation ? turnPageTime : 0}s`,\r\n\t\t\t\tboxShadow: showShadow && turnType === 0 ? '0 0 10px 0 rgba(0,0,0,.4)' : ''\r\n\t\t\t}\"\r\n\t\t>\r\n\t\t\t<!-- 章节名 -->\r\n\t\t\t<view class=\"chapter\">{{ prePage.chapterName }}</view>\r\n\r\n\t\t\t<!-- 外层class=\"content\"用于计算阅读部分的高度 -->\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<!-- 内层class=\"inner-box\"利用innerHeight将内容截取至整行，防止文字不完整的情况出现 -->\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{ height: `${innerHeight}px` }\" v-if=\"prePage.canRead\">\r\n\t\t\t\t\t<!-- 最里层class=\"book-inner\"的用于获取文本总高度，计算总页数，注意不可以overflow:hidden -->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"book-inner\"\r\n\t\t\t\t\t\tv-html=\"prePage.text\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\tfontSize: `${fontSize}px`,\r\n\t\t\t\t\t\t\tlineHeight: `${lineHeight * fontSize}px`,\r\n\t\t\t\t\t\t\tcolor: `${colorList[background - 1]}`,\r\n\t\t\t\t\t\t\ttransform: `translateY(-${prePage.pageNum * innerHeight}px)`\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"display:flex;flex-flow: column;justify-content: center;align-items: center;height: 100%;\" v-else>暂时不可阅读</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t<!-- 时间 -->\r\n\t\t\t\t<view>{{ systemTimeStr }}</view>\r\n\t\t\t\t<!-- 页码 -->\r\n\t\t\t\t<view>{{ prePage.pageNum + 1 }}/{{ prePage.totalPage }}</view>\r\n\t\t\t\t<!-- 电量 -->\r\n\t\t\t\t<view><battery :level=\"batteryLevel\" :charging=\"batteryState === 2\"></battery></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 本页 -->\r\n\r\n\t\t<view\r\n\t\t\tclass=\"container\"\r\n\t\t\t:class=\"{ container0: background === 1, container1: background === 2 }\"\r\n\t\t\t:style=\"{\r\n\t\t\t\tzIndex: 101,\r\n\t\t\t\ttransform: `translate${curPage.pageTranslate[turnType]}`,\r\n\t\t\t\ttransition: `transform ${showAnimation ? turnPageTime : 0}s`,\r\n\t\t\t\tboxShadow: showShadow && turnType === 0 ? '0 0 10px 0 rgba(0,0,0,.4)' : ''\r\n\t\t\t}\"\r\n\t\t\t@touchstart=\"touchStart\"\r\n\t\t\t@touchend=\"touchEnd\"\r\n\t\t\t@touchmove=\"touchMove\"\r\n\t\t\t@touchcancel=\"touchcancel\"\r\n\t\t>\r\n\t\t\t<!-- 章节名 -->\r\n\t\t\t<view class=\"chapter\">{{ curPage.chapterName }}</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{ height: `${innerHeight}px` }\" v-if=\"curPage.canRead\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"book-inner\"\r\n\t\t\t\t\t\tv-html=\"curPage.text\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\tfontSize: `${fontSize}px`,\r\n\t\t\t\t\t\t\tlineHeight: `${lineHeight * fontSize}px`,\r\n\t\t\t\t\t\t\tcolor: `${colorList[background - 1]}`,\r\n\t\t\t\t\t\t\ttransform: `translateY(-${curPage.pageNum * innerHeight}px)`\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"display:flex;flex-flow: column;justify-content: center;align-items: center;height: 100%;\" v-else>暂时不可阅读</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t<!-- 时间 -->\r\n\t\t\t\t<view>{{ systemTimeStr }}</view>\r\n\t\t\t\t<!-- 页码 -->\r\n\t\t\t\t<view>{{ curPage.pageNum + 1 }}/{{ curPage.totalPage }}</view>\r\n\t\t\t\t<!-- 电量 -->\r\n\t\t\t\t<view><battery :level=\"batteryLevel\" :charging=\"batteryState === 2\"></battery></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view\r\n\t\t\tclass=\"container\"\r\n\t\t\t:class=\"{ container0: background === 1, container1: background === 2 }\"\r\n\t\t\t:style=\"{\r\n\t\t\t\tzIndex: 100,\r\n\t\t\t\ttransform: `translate${nextPage.pageTranslate[turnType]}`,\r\n\t\t\t\ttransition: `transform ${showAnimation ? turnPageTime : 0}s`,\r\n\t\t\t\tboxShadow: showShadow && turnType === 0 ? '0 0 10px 0 rgba(0,0,0,.4)' : ''\r\n\t\t\t}\"\r\n\t\t>\r\n\t\t\t<view class=\"chapter\">{{ nextPage.chapterName }}</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{ height: `${innerHeight}px` }\" v-if=\"nextPage.canRead\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"book-inner\"\r\n\t\t\t\t\t\tv-html=\"nextPage.text\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\tfontSize: `${fontSize}px`,\r\n\t\t\t\t\t\t\tlineHeight: `${lineHeight * fontSize}px`,\r\n\t\t\t\t\t\t\tcolor: `${colorList[background - 1]}`,\r\n\t\t\t\t\t\t\ttransform: `translateY(-${nextPage.pageNum * innerHeight}px)`\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"display:flex;flex-flow: column;justify-content: center;align-items: center;height: 100%;\" v-else>暂时不可阅读</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t<view>{{ systemTimeStr }}</view>\r\n\t\t\t\t<view>{{ nextPage.pageNum + 1 }}/{{ nextPage.totalPage }}</view>\r\n\t\t\t\t<view><battery :level=\"batteryLevel\" :charging=\"batteryState === 2\"></battery></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"menu\" :style=\"{ height: `100%`, width: `${windowWidth}px` }\" v-if=\"menuShow\" @touchend=\"closeMenu\">\r\n\t\t\t<!-- 菜单层包含返回按钮的上半部分 -->\r\n\t\t\t<view class=\"menu-top\" :style=\"{ height: `${statusBarHeight + 40}px`, top: itemShow ? 0 : `-100%` }\" @touchend.stop>\r\n\t\t\t\t<view :style=\"{ height: `${statusBarHeight}px` }\"></view>\r\n\t\t\t\t<view class=\"head\">\r\n\t\t\t\t\t<text class=\"iconfont back\" @click=\"back\">&#xe71a;</text>\r\n\t\t\t\t\t<view class=\"title\">{{ bookName }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 菜单主体 -->\r\n\t\t\t<view class=\"menu-bottom\" :style=\"{ bottom: itemShow ? 0 : '-100%' }\" @touchend.stop>\r\n\t\t\t\t<!-- 用于显示章节进度 -->\r\n\t\t\t\t<view class=\"show-chapter\" v-if=\"progressTouched\">{{ directoryList[chapterProgress].name }}</view>\r\n\t\t\t\t<view class=\"show-chapter\" v-else>{{ curChapter.chapterName }}</view>\r\n\r\n\t\t\t\t<!-- 章节进度条 -->\r\n\t\t\t\t<view class=\"progress-box\">\r\n\t\t\t\t\t<text @click=\"goPreChapter\">上一章</text>\r\n\t\t\t\t\t<view style=\"flex: 1;height: 100%;padding: 8px 0;\">\r\n\t\t\t\t\t\t<slider\r\n\t\t\t\t\t\t\t:value=\"curChapter.chapterIndex\"\r\n\t\t\t\t\t\t\tactiveColor=\"#000\"\r\n\t\t\t\t\t\t\t:block-size=\"20\"\r\n\t\t\t\t\t\t\t:max=\"directoryList.length - 1\"\r\n\t\t\t\t\t\t\t@changing=\"slideChanging\"\r\n\t\t\t\t\t\t\t@change=\"slideChange\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text @click=\"goNextChapter\">下一章</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"items-box\">\r\n\t\t\t\t\t<view class=\"item-box\" @click=\"openDirectory\">\r\n\t\t\t\t\t\t<text class=\"iconfont\" style=\"font-size: 25px;\">&#xe601;</text>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">目录</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-box\" v-if=\"background === 2\" @click=\"changeBackground(1)\">\r\n\t\t\t\t\t\t<text class=\"iconfont\" style=\"font-size: 25px;\">&#xe63e;</text>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">夜间</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-box\" v-if=\"background === 1\" @click=\"changeBackground(2)\">\r\n\t\t\t\t\t\t<text class=\"iconfont\" style=\"font-size: 25px;\">&#xe64c;</text>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">日间</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-box\" @click=\"openSetting\">\r\n\t\t\t\t\t\t<text class=\"iconfont\" style=\"font-size: 25px;\">&#xe61d;</text>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">设置</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"setting\" :style=\"{ bottom: settingShow ? 0 : `-100%` }\" @touchend.stop>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">字号</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"bigSize\" v-if=\"fontSize < maxFontSize\">A+</view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"color: #666; border: #666 solid 1px;\" v-else>A+</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"smallSize\" v-if=\"fontSize > minFontSize\">A-</view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"color: #666;border: #666 solid 1px;\" v-else>A-</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"changeFont(2)\" v-if=\"simplified === 1\">繁體</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"changeFont(1)\" v-else style=\"border: #FF9900 solid 1px;color: #FF9900\">繁體</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">排版</view>\r\n\t\t\t\t\t<view class=\"type-setting\" :class=\"{ active: lineHeight === 1 }\" @click=\"changeLineHeight(1)\">\r\n\t\t\t\t\t\t<view class=\"line\" :class=\"{ lineActive: lineHeight === 1 }\" v-for=\"i in 5\" :key=\"i\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"type-setting\" :class=\"{ active: lineHeight === 1.5 }\" @click=\"changeLineHeight(1.5)\">\r\n\t\t\t\t\t\t<view class=\"line\" :class=\"{ lineActive: lineHeight === 1.5 }\" v-for=\"i in 4\" :key=\"i\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"type-setting\" :class=\"{ active: lineHeight === 2 }\" @click=\"changeLineHeight(2)\">\r\n\t\t\t\t\t\t<view class=\"line\" :class=\"{ lineActive: lineHeight === 2 }\" v-for=\"i in 3\" :key=\"i\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">翻页</view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{ active: turnType === 0 }\" style=\"padding: 5px 8px;\" @click=\"changeTurnType(0)\">覆盖</view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{ active: turnType === 1 }\" style=\"padding: 5px 8px;\" @click=\"changeTurnType(1)\">左右平移</view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{ active: turnType === 2 }\" style=\"padding: 5px 8px;\" @click=\"changeTurnType(2)\">上下平移</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">背景</view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"background: url(@/static/background1.jpg);\" :class=\"{ active: background === 1 }\" @click=\"changeBackground(1)\"></view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"background-color: #000;\" :class=\"{ active: background === 2 }\" @click=\"changeBackground(2)\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 目录层 -->\r\n\t\t\t<view\r\n\t\t\t\tclass=\"directory\"\r\n\t\t\t\t:class=\"{ container0: background === 1, container1: background === 2 }\"\r\n\t\t\t\tv-if=\"directoryShowBefore\"\r\n\t\t\t\t:style=\"{ left: directoryShow ? 0 : '-100%', color: `${colorList[background - 1]}`, boxShadow: '0 0 10px 0 rgba(0,0,0,.4)' }\"\r\n\t\t\t\t@touchend.stop\r\n\t\t\t>\r\n\t\t\t\t<view class=\"bookname\">{{ bookName }}</view>\r\n\t\t\t\t<virtual-list :items=\"directoryList\" :size=\"40\" :remain=\"16\" :active=\"curChapter.chapterIndex\" :scrollHeight=\"windowHeight - 60\">\r\n\t\t\t\t\t<template v-slot=\"{ item, active }\">\r\n\t\t\t\t\t\t<view class=\"directory-listItem\" :class=\"{ active: item.index == active }\" @click=\"goToChapter(item.index)\">\r\n\t\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t\t\t11{{JSON.stringify(item)}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</virtual-list>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from 'vuex';\r\nimport battery from '@/components/battery.vue';\r\nimport virtualList from '@/components/virtualList.vue';\r\nimport { traditionalized, simplized, dateToStr } from '@/utils/utils.js';\r\nexport default {\r\n\tcomponents: {\r\n\t\tbattery,\r\n\t\tvirtualList\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbookInfo: {},\r\n\t\t\tbookName: '',\r\n\t\t\tbookId: '',\r\n\t\t\tindex: 0,\r\n\t\t\thistory: {\r\n\t\t\t\t//本书历史记录\r\n\t\t\t\tchapterIndex: 0,\r\n\t\t\t\tprogress: 0\r\n\t\t\t},\r\n\t\t\ttext: '',\r\n\t\t\tdirectoryList: [], //目录列表\r\n\t\t\tcurrentPage: 0, //当前页\r\n\r\n\t\t\tinnerHeight: 0, //截取至整行的最大高度\r\n\r\n\t\t\tpreChapter: {\r\n\t\t\t\t//上一章数据\r\n\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\tchapterIndex: '',\r\n\t\t\t\tchapterName: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\ttotalPage: '',\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\tcurChapter: {\r\n\t\t\t\t//本一章数据\r\n\t\t\t\tchapterIndex: '',\r\n\t\t\t\tchapterName: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\ttotalPage: '',\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\tnextChapter: {\r\n\t\t\t\t//下一章数据\r\n\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\tchapterIndex: '',\r\n\t\t\t\tchapterName: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\ttotalPage: '',\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\ttmpChapter: {\r\n\t\t\t\t//暂存章节内容\r\n\t\t\t\ttext: '',\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\tcover: {\r\n\t\t\t\t//封面的状态\r\n\t\t\t\tpageTranslate: ['', '', ''] //页面位移，三个数对应三种翻页方式\r\n\t\t\t},\r\n\r\n\t\t\tprePage: {\r\n\t\t\t\t//上一页数据\r\n\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\tchapterName: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\tpageNum: '',\r\n\t\t\t\ttotalPage: 1,\r\n\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\tcurPage: {\r\n\t\t\t\t//本页数据\r\n\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\tchapterName: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\tpageNum: 1,\r\n\t\t\t\ttotalPage: 1,\r\n\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\tnextPage: {\r\n\t\t\t\t//下一页数据\r\n\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\tchapterName: '',\r\n\t\t\t\ttext: '',\r\n\t\t\t\tpageNum: '',\r\n\t\t\t\ttotalPage: '',\r\n\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\tcanRead: true\r\n\t\t\t},\r\n\r\n\t\t\tnext: false, //用户是否正在翻下一页\r\n\t\t\tpre: false, //用户是否正在翻上一页\r\n\r\n\t\t\twaitForNext: false, //是否正在等待下一页准备完毕后跳转\r\n\t\t\twaitForPre: false, //是否正在等待上一页准备完毕后跳转\r\n\t\t\twaitForNextChapter: false, //是否正在等待下一章准备完毕后跳转\r\n\t\t\twaitForPreChapter: false, //是否正在等待上一章准备完毕后跳转\r\n\r\n\t\t\tshowAnimation: false, //是否开启动画\r\n\t\t\tshowShadow: false, //是否显示页面阴影\r\n\r\n\t\t\twindowWidth: 0, //可用屏幕宽度\r\n\t\t\twindowHeight: 0, //可用屏幕高度\r\n\t\t\tcontentHeight: 0, //阅读区域高度\r\n\r\n\t\t\tplatform: '', //设备\r\n\t\t\tbatteryState: '', //电池状态\r\n\t\t\tbatteryLevel: 100, //电量\r\n\t\t\tsystemTime: '', //系统时间\r\n\t\t\tsystemTimeStr: '', //系统时间字符串\r\n\t\t\tstatusBarHeight: 0, //状态栏高度\r\n\t\t\tpixelRatio: '', //设备像素比\r\n\r\n\t\t\ttouchStartX: 0, // 触屏起始点x\r\n\t\t\ttouchX: 0, // 瞬时触屏点x\r\n\t\t\tdelta: 0, // 手指瞬时位移\r\n\r\n\t\t\ttouchStartY: 0, // 触屏起始点y\r\n\t\t\ttouchY: 0, // 瞬时触屏点y\r\n\r\n\t\t\tmenuShow: false, //菜单栏box是否渲染\r\n\t\t\titemShow: false, // 菜单栏动画控制\r\n\t\t\tsettingShow: false, //设置栏动画控制\r\n\t\t\tdirectoryShow: false, //目录动画控制\r\n\t\t\tdirectoryShowBefore: false, // 目录渲染\r\n\t\t\tturnPageTime: 0.5, //翻页动画时间\r\n\r\n\t\t\tmaxFontSize: 30, //最大字体大小，px\r\n\t\t\tminFontSize: 14, //最小字体大小，px\r\n\t\t\tturnType: 0, //翻页方式\r\n\t\t\tfontSize: '', //字体大小，\r\n\t\t\tsimplified: '', //是否简体\r\n\t\t\tlineHeight: '', //行高，注意是fontSize的倍数\r\n\t\t\tbackground: '', //背景\r\n\t\t\tcolorList: ['#000', '#666'], //与背景对应的字体颜色\r\n\r\n\t\t\tchapterProgress: 0, //‘章节进度条’的参数\r\n\t\t\tprogressTouched: false, //是否正在点击‘章节进度条’\r\n\t\t\tshowmask: true\r\n\t\t};\r\n\t},\r\n\tonLoad(obj) {\r\n\t\tconsole.log(obj);\r\n\t\tthis.bookId = obj.id;\r\n\t\t// 图书基本信息\r\n\t\tthis.bookInfo = JSON.parse(plus.storage.getItem('localbookstore-' + obj.id));\r\n\t\tconsole.log(this.bookInfo);\r\n\t\tthis.bookName = this.bookInfo.articlename;\r\n\r\n\t\tthis.getSystemInfo();\r\n\t\tthis.initPage();\r\n\t},\r\n\tonUnload() {\r\n\t\t// #ifdef APP-PLUS\r\n\t\t// 退出全屏\r\n\t\tplus.navigator.setFullscreen(false);\r\n\t\t// #endif\r\n\t\tthis.setStorage();\r\n\t},\r\n\tonHide() {\r\n\t\tthis.setStorage();\r\n\t},\r\n\tmounted() {},\r\n\tcomputed: {\r\n\t\tprogress() {\r\n\t\t\t//章节的阅读进度\r\n\t\t\tif (this.curChapter.totalPage === 1) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\treturn this.currentPage / (this.curChapter.totalPage - 1);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tsetStorage() {\r\n\t\t\tlet history = uni.getStorageSync('history');\r\n\t\t\tif (typeof history !== 'object') {\r\n\t\t\t\thistory = [];\r\n\t\t\t}\r\n\t\t\tlet have = false;\r\n\t\t\thistory.forEach(value => {\r\n\t\t\t\tif (value.bookId === this.bookId) {\r\n\t\t\t\t\thave = true;\r\n\t\t\t\t\tvalue.chapterIndex = this.curChapter.chapterIndex;\r\n\t\t\t\t\tvalue.progress = this.progress;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (!have) {\r\n\t\t\t\thistory.push({\r\n\t\t\t\t\tbookId: this.bookId,\r\n\t\t\t\t\tchapterIndex: this.curChapter.chapterIndex,\r\n\t\t\t\t\tprogress: this.progress\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tuni.setStorageSync('history', history);\r\n\t\t\t// 更新阅读进度，章节为单位\r\n\t\t\tthis.$set(this.bookInfo, 'lastzj', this.curChapter.chapterName);\r\n\t\t\tthis.$set(this.bookInfo, 'progress', ((100 * (this.curChapter.chapterIndex + 1)) / this.directoryList.length).toFixed(2));\r\n\t\t\tthis.$set(this.bookInfo, 'lasttime', parseInt(new Date().getTime() / 1000));\r\n\t\t\tplus.storage.setItem('localbookstore-' + this.bookId, JSON.stringify(this.bookInfo));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 返回上一页面\r\n\t\t **/\r\n\t\tback() {\r\n\t\t\tuni.navigateBack();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取设备信息\r\n\t\t **/\r\n\t\tgetSystemInfo() {\r\n\t\t\tconst { windowWidth, windowHeight, statusBarHeight, platform, pixelRatio } = uni.getSystemInfoSync();\r\n\t\t\t//获取一些必要的设备参数\r\n\t\t\tthis.statusBarHeight = statusBarHeight;\r\n\t\t\tthis.windowWidth = windowWidth;\r\n\t\t\tthis.windowHeight = windowHeight;\r\n\t\t\tthis.pixelRatio = pixelRatio;\r\n\t\t\tthis.platform = platform;\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\t// 全屏\r\n\t\t\tplus.navigator.setFullscreen(true);\r\n\t\t\t// 取消ios左滑返回\r\n\t\t\tlet page = this.$mp.page.$getAppWebview();\r\n\t\t\tpage.setStyle({ popGesture: 'none' });\r\n\r\n\t\t\tif (this.platform === 'ios') {\r\n\t\t\t\t// 获取ios电量\r\n\t\t\t\tlet UIDevice = plus.ios.import('UIDevice');\r\n\t\t\t\tlet dev = UIDevice.currentDevice();\r\n\t\t\t\tif (!dev.isBatteryMonitoringEnabled()) {\r\n\t\t\t\t\tdev.setBatteryMonitoringEnabled(true);\r\n\t\t\t\t}\r\n\t\t\t\tsetInterval(() => {\r\n\t\t\t\t\tthis.batteryState = dev.batteryState();\r\n\t\t\t\t\tthis.batteryLevel = dev.batteryLevel() * 100;\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\t// 获取安卓电量\r\n\t\t\t\tlet main = plus.android.runtimeMainActivity();\r\n\t\t\t\tlet Intent = plus.android.importClass('android.content.Intent');\r\n\t\t\t\tlet recevier = plus.android.implements('io.dcloud.feature.internal.reflect.BroadcastReceiver', {\r\n\t\t\t\t\tonReceive: (context, intent) => {\r\n\t\t\t\t\t\tlet action = intent.getAction();\r\n\t\t\t\t\t\tif (action == Intent.ACTION_BATTERY_CHANGED) {\r\n\t\t\t\t\t\t\tthis.batteryState = intent.getIntExtra('status', 0); //电池状态\r\n\t\t\t\t\t\t\tthis.batteryLevel = intent.getIntExtra('level', 0); //电量\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tlet IntentFilter = plus.android.importClass('android.content.IntentFilter');\r\n\t\t\t\tlet filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n\t\t\t\tmain.registerReceiver(recevier, filter);\r\n\t\t\t}\r\n\r\n\t\t\t// #endif\r\n\r\n\t\t\t// 设置时间\r\n\t\t\tlet date = new Date();\r\n\t\t\tthis.systemTime = Date.parse(date);\r\n\t\t\tthis.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.systemTime += 60000;\r\n\t\t\t\tthis.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t}, 60000);\r\n\r\n\t\t\t// 获取字体、排版等信息\r\n\r\n\t\t\t/*****************************************/\r\n\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t/*****************************************/\r\n\r\n\t\t\t//可能缓存在前端可能从后端拿，如果是异步注意同步处理\r\n\t\t\tthis.fontSize = uni.getStorageSync('fontSize');\r\n\t\t\tif (typeof this.fontSize !== 'number') {\r\n\t\t\t\tthis.fontSize = 18;\r\n\t\t\t}\r\n\t\t\tthis.simplified = uni.getStorageSync('simplified');\r\n\t\t\tif (typeof this.simplified !== 'number') {\r\n\t\t\t\tthis.simplified = 1;\r\n\t\t\t}\r\n\t\t\tthis.lineHeight = uni.getStorageSync('lineHeight');\r\n\t\t\tif (typeof this.lineHeight !== 'number') {\r\n\t\t\t\tthis.lineHeight = 1.5;\r\n\t\t\t}\r\n\t\t\tthis.background = uni.getStorageSync('background');\r\n\t\t\tif (typeof this.background !== 'number') {\r\n\t\t\t\tthis.background = 1;\r\n\t\t\t}\r\n\t\t\tthis.turnType = uni.getStorageSync('turnType');\r\n\t\t\tif (typeof this.turnType !== 'number') {\r\n\t\t\t\tthis.turnType = 0;\r\n\t\t\t}\r\n\t\t\tlet history = uni.getStorageSync('history');\r\n\t\t\tif (typeof history !== 'object') {\r\n\t\t\t\thistory = [];\r\n\t\t\t}\r\n\t\t\thistory.forEach(value => {\r\n\t\t\t\tif (value.bookId === this.bookId) {\r\n\t\t\t\t\tthis.history = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t/*****************************************/\r\n\t\t\t/*****************************************/\r\n\t\t\t/*****************************************/\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取数据并计算页面\r\n\t\t **/\r\n\t\tasync initPage() {\r\n\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\tawait this.calcHeight();\r\n\t\t\tawait this.getDirectoryList();\r\n\t\t\tif (this.history.chapterIndex > this.directoryList.length - 1 || !this.history.chapterIndex) {\r\n\t\t\t\tthis.history.chapterIndex = 0;\r\n\t\t\t}\r\n\t\t\tawait this.getThreeChapter(this.history.chapterIndex);\r\n\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * this.history.progress);\r\n\t\t\tthis.goToPage(page);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 计算innerHeight，用于截取至整行\r\n\t\t **/\r\n\t\tcalcHeight() {\r\n\t\t\tif (this.contentHeight) {\r\n\t\t\t\tlet lineHeight = this.fontSize * this.lineHeight;\r\n\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\tlineHeight = Math.floor(lineHeight * this.pixelRatio) / this.pixelRatio;\r\n\t\t\t\t// #endif\r\n\t\t\t\tlet lineNum = Math.floor((this.contentHeight + Math.floor((lineHeight - this.fontSize) / 2)) / lineHeight);\r\n\t\t\t\tthis.innerHeight = lineNum * lineHeight;\r\n\t\t\t} else {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\tquery\r\n\t\t\t\t\t\t\t.select('#content')\r\n\t\t\t\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t\tthis.contentHeight = height;\r\n\t\t\t\t\t\t\t\tlet lineHeight = this.fontSize * this.lineHeight;\r\n\r\n\t\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\t\t\tlineHeight = Math.floor(lineHeight * this.pixelRatio) / this.pixelRatio;\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\tlet lineNum = Math.floor((height + Math.floor((lineHeight - this.fontSize) / 2)) / lineHeight);\r\n\t\t\t\t\t\t\t\tthis.innerHeight = lineNum * lineHeight;\r\n\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.exec();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 计算本章页数\r\n\t\t **/\r\n\t\tcalcCurChapter() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t// 此处setTimeout 100ms是为了确保元素渲染完毕从而获取正确高度，如果遇到页面页数计算不正确的情况可以增加时间试试看\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\tquery\r\n\t\t\t\t\t\t.select('#curChapter')\r\n\t\t\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\r\n\t\t\t\t\t\t\theight = Math.round(height * this.pixelRatio) / this.pixelRatio;\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tthis.curChapter.totalPage = Math.ceil(height / this.innerHeight) || 1;\r\n\t\t\t\t\t\t\tthis.curChapter.ready = true; //章节准备完毕\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 计算上一章页数,并翻页（如果有）\r\n\t\t **/\r\n\t\tcalcPreChapter() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t// 此处setTimeout 100ms是为了确保元素渲染完毕从而获取正确高度，如果遇到页面页数计算不正确的情况可以增加时间试试看\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\tquery\r\n\t\t\t\t\t\t.select('#preChapter')\r\n\t\t\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\t\theight = Math.round(height * this.pixelRatio) / this.pixelRatio;\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tthis.preChapter.totalPage = Math.ceil(height / this.innerHeight) || 1;\r\n\t\t\t\t\t\t\tthis.preChapter.ready = true; //章节准备完毕\r\n\t\t\t\t\t\t\tif (this.waitForPre) {\r\n\t\t\t\t\t\t\t\t//发生在用户翻至上一章，但是上一章数据未准备完毕时\r\n\t\t\t\t\t\t\t\tuni.hideLoading(); //把loading关掉\r\n\t\t\t\t\t\t\t\tthis.waitForPre = false;\r\n\t\t\t\t\t\t\t\t//页面准备完毕\r\n\t\t\t\t\t\t\t\tthis.goPrePage();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.waitForPreChapter) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tthis.waitForPreChapter = false;\r\n\t\t\t\t\t\t\t\tthis.goPreChapter();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 计算下一章页数,并翻页（如果有）\r\n\t\t **/\r\n\t\tcalcNextChapter() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t// 此处setTimeout 100ms是为了确保元素渲染完毕从而获取正确高度，如果遇到页面页数计算不正确的情况可以增加时间试试看\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\tquery\r\n\t\t\t\t\t\t.select('#nextChapter')\r\n\t\t\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\t\theight = Math.round(height * this.pixelRatio) / this.pixelRatio;\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tthis.nextChapter.totalPage = Math.ceil(height / this.innerHeight) || 1;\r\n\t\t\t\t\t\t\tthis.nextChapter.ready = true; //章节准备完毕\r\n\t\t\t\t\t\t\tif (this.waitForNext) {\r\n\t\t\t\t\t\t\t\t//发生在用户翻至下一章，但是下一章数据未准备完毕时\r\n\t\t\t\t\t\t\t\tuni.hideLoading(); //把loading关掉\r\n\t\t\t\t\t\t\t\tthis.waitForNext = false;\r\n\t\t\t\t\t\t\t\t//页面准备完毕\r\n\t\t\t\t\t\t\t\tthis.goNextPage();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.waitForNextChapter) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tthis.waitForNextChapter = false;\r\n\t\t\t\t\t\t\t\tthis.goNextChapter();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸开始（封面）\r\n\t\t **/\r\n\t\tcoverTouchStart(e) {\r\n\t\t\tthis.showAnimation = false; //关掉动画，否则翻页会很慢\r\n\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\tthis.touchStartX = e.touches[0].clientX;\r\n\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\tthis.touchStartY = e.touches[0].clientY;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸（封面）\r\n\t\t **/\r\n\t\tcoverTouchMove(e) {\r\n\t\t\tthis.showShadow = true;\r\n\t\t\tlet delta = 0;\r\n\t\t\tif (this.turnType === 0 || this.turnType === 1) {\r\n\t\t\t\t//翻页方式为‘覆盖’或者‘左右平移’\r\n\t\t\t\tdelta = e.touches[0].clientX - this.touchStartX;\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta > this.windowWidth) {\r\n\t\t\t\t\tdelta = this.windowWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif (delta < -this.windowWidth) {\r\n\t\t\t\t\tdelta = -this.windowWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.delta = e.touches[0].clientX - this.touchX;\r\n\t\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\t} else {\r\n\t\t\t\t//翻页方式为‘上下平移’\r\n\t\t\t\tdelta = e.touches[0].clientY - this.touchStartY;\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta > this.windowHeight) {\r\n\t\t\t\t\tdelta = this.windowHeight;\r\n\t\t\t\t}\r\n\t\t\t\tif (delta < -this.windowHeight) {\r\n\t\t\t\t\tdelta = -this.windowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.delta = e.touches[0].clientY - this.touchY;\r\n\t\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.next) {\r\n\t\t\t\t//首次翻下一页之后\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta > 0) {\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.cover.pageTranslate = [`(${delta}px,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t}\r\n\t\t\tif (!this.pre && !this.next && delta < 0) {\r\n\t\t\t\t//首次翻下一页\r\n\t\t\t\tthis.next = true;\r\n\t\t\t\tthis.cover.pageTranslate = [`(${delta}px,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px,)`];\r\n\t\t\t}\r\n\t\t\tif (this.pre) {\r\n\t\t\t\t//首次右滑后，由于是封面不做任何操作\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.pre && !this.next && delta > 0) {\r\n\t\t\t\t//首次右滑\r\n\t\t\t\tthis.pre = true;\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已经是第一页了',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸结束（封面）\r\n\t\t **/\r\n\t\tcoverTouchEnd(e) {\r\n\t\t\tthis.showAnimation = true;\r\n\t\t\tthis.showShadow = false;\r\n\t\t\tlet delta = 0;\r\n\t\t\tif (this.turnType === 0 || this.turnType === 1) {\r\n\t\t\t\t//翻页方式为‘覆盖’或者‘左右平移’\r\n\t\t\t\tdelta = e.changedTouches[0].clientX - this.touchStartX;\r\n\t\t\t} else {\r\n\t\t\t\t//翻页方式为‘上下平移’\r\n\t\t\t\tdelta = e.changedTouches[0].clientY - this.touchStartY;\r\n\t\t\t}\r\n\t\t\tif (delta === 0) {\r\n\t\t\t\tif (e.changedTouches[0].clientX < this.windowWidth / 3) {\r\n\t\t\t\t\t//点击屏幕左1/3为上一页\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已经是第一页了',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (e.changedTouches[0].clientX > (this.windowWidth / 3) * 2) {\r\n\t\t\t\t\t//点击屏幕右1/3为下一页\r\n\t\t\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\t} else if (e.changedTouches[0].clientX <= (this.windowWidth / 3) * 2 && e.changedTouches[0].clientX >= this.windowWidth / 3) {\r\n\t\t\t\t\t//点击屏幕中间1/3为呼出菜单\r\n\t\t\t\t\tthis.showMenu();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.next && this.delta <= 0) {\r\n\t\t\t\t\t//下一页\r\n\t\t\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\t} else if (this.next && this.delta > 0) {\r\n\t\t\t\t\t//取消翻页\r\n\t\t\t\t\tthis.cover.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.next = false;\r\n\t\t\tthis.pre = false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸取消（封面）\r\n\t\t **/\r\n\t\tcoverTouchcancel() {\r\n\t\t\t// 取消翻页\r\n\t\t\tthis.showAnimation = false;\r\n\t\t\tthis.showShadow = false;\r\n\t\t\tthis.cover.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\tthis.next = false;\r\n\t\t\tthis.pre = false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸开始\r\n\t\t **/\r\n\t\ttouchStart(e) {\r\n\t\t\tthis.showAnimation = false;\r\n\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\tthis.touchStartX = e.touches[0].clientX;\r\n\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\tthis.touchStartY = e.touches[0].clientY;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸\r\n\t\t **/\r\n\t\ttouchMove(e) {\r\n\t\t\tthis.showShadow = true;\r\n\t\t\tlet delta = 0;\r\n\t\t\tif (this.turnType === 0 || this.turnType === 1) {\r\n\t\t\t\t//翻页方式为‘覆盖’或者‘左右平移’\r\n\t\t\t\tdelta = e.touches[0].clientX - this.touchStartX;\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta > this.windowWidth) {\r\n\t\t\t\t\tdelta = this.windowWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif (delta < -this.windowWidth) {\r\n\t\t\t\t\tdelta = -this.windowWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.delta = e.touches[0].clientX - this.touchX;\r\n\t\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\t} else {\r\n\t\t\t\t//翻页方式为‘上下平移’\r\n\t\t\t\tdelta = e.touches[0].clientY - this.touchStartY;\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta > this.windowHeight) {\r\n\t\t\t\t\tdelta = this.windowHeight;\r\n\t\t\t\t}\r\n\t\t\t\tif (delta < -this.windowHeight) {\r\n\t\t\t\t\tdelta = -this.windowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.delta = e.touches[0].clientY - this.touchY;\r\n\t\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.next && this.nextPage.ready) {\r\n\t\t\t\t//首次翻下一页之后\r\n\t\t\t\tif (this.nextPage.isEnd) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta > 0) {\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\tthis.curPage.pageTranslate = [`(${delta}px,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t}\r\n\t\t\tif (!this.pre && !this.next && delta < 0) {\r\n\t\t\t\t//首次翻下一页\r\n\t\t\t\tthis.next = true;\r\n\t\t\t\tif (this.nextPage.ready) {\r\n\t\t\t\t\t//页面准备好了\r\n\t\t\t\t\tif (this.nextPage.isEnd) {\r\n\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '跳转推荐页',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [`(${delta}px,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.nextChapter.ready) {\r\n\t\t\t\t\t//下一章已经准备好了\r\n\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\tready: this.nextChapter.ready,\r\n\t\t\t\t\t\tchapterName: this.nextChapter.chapterName,\r\n\t\t\t\t\t\ttext: this.nextChapter.text,\r\n\t\t\t\t\t\tpageNum: 0,\r\n\t\t\t\t\t\ttotalPage: this.nextChapter.totalPage,\r\n\t\t\t\t\t\tpageTranslate: [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`],\r\n\t\t\t\t\t\tcanRead: this.nextChapter.canRead\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(${delta}px,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.pre && this.prePage.ready) {\r\n\t\t\t\t//首次翻上一页之后\r\n\r\n\t\t\t\t// 限制边界\r\n\t\t\t\tif (delta < 0) {\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.prePage.isCover) {\r\n\t\t\t\t\t//上一页是封面\r\n\t\t\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth + delta}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth + delta}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!this.pre && !this.next && delta > 0) {\r\n\t\t\t\t//首次翻上一页\r\n\t\t\t\tthis.pre = true;\r\n\t\t\t\tif (this.prePage.ready) {\r\n\t\t\t\t\t//页面准备好了\r\n\t\t\t\t\tif (this.prePage.isCover) {\r\n\t\t\t\t\t\t//上一页是封面\r\n\t\t\t\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth + delta}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth + delta}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.preChapter.ready) {\r\n\t\t\t\t\t//上一章已经准备好了\r\n\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\tready: this.preChapter.ready,\r\n\t\t\t\t\t\tchapterName: this.preChapter.chapterName,\r\n\t\t\t\t\t\ttext: this.preChapter.text,\r\n\t\t\t\t\t\tpageNum: this.preChapter.totalPage - 1,\r\n\t\t\t\t\t\ttotalPage: this.preChapter.totalPage,\r\n\t\t\t\t\t\tpageTranslate: [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`],\r\n\t\t\t\t\t\tcanRead: this.preChapter.canRead\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth + delta}px,0)`, `(${-this.windowWidth + delta}px,0)`, `(0,${-this.windowHeight + delta}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${delta}px,0)`, `(0,${delta}px)`];\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth + delta}px,0)`, `(0,${this.windowHeight + delta}px)`];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 触摸结束\r\n\t\t **/\r\n\t\ttouchEnd(e) {\r\n\t\t\tthis.showAnimation = true;\r\n\t\t\tthis.showShadow = false;\r\n\t\t\tlet delta = 0;\r\n\t\t\tif (this.turnType === 0 || this.turnType === 1) {\r\n\t\t\t\tdelta = e.changedTouches[0].clientX - this.touchStartX;\r\n\t\t\t} else {\r\n\t\t\t\tdelta = e.changedTouches[0].clientY - this.touchStartY;\r\n\t\t\t}\r\n\t\t\tif (delta < 0.8 && delta > -0.8) {\r\n\t\t\t\t//部分手机点击屏幕时无法做到delta===0\r\n\t\t\t\tif (e.changedTouches[0].clientX < this.windowWidth / 3) {\r\n\t\t\t\t\t//点击屏幕左1/3为上一页\r\n\t\t\t\t\tthis.goPrePage();\r\n\t\t\t\t} else if (e.changedTouches[0].clientX > (this.windowWidth / 3) * 2) {\r\n\t\t\t\t\t//点击屏幕右1/3为下一页\r\n\t\t\t\t\tthis.goNextPage();\r\n\t\t\t\t} else if (e.changedTouches[0].clientX <= (this.windowWidth / 3) * 2 && e.changedTouches[0].clientX >= this.windowWidth / 3) {\r\n\t\t\t\t\t//点击屏幕中间1/3为呼出菜单\r\n\t\t\t\t\tthis.showMenu();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.next && this.delta <= 0) {\r\n\t\t\t\t\t//下一页\r\n\t\t\t\t\tthis.goNextPage();\r\n\t\t\t\t} else if (this.next && this.delta > 0) {\r\n\t\t\t\t\t//取消翻页\r\n\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\t\t} else if (this.pre && this.delta >= 0) {\r\n\t\t\t\t\t//上一页\r\n\t\t\t\t\tthis.goPrePage();\r\n\t\t\t\t} else if (this.pre && this.delta < 0) {\r\n\t\t\t\t\t//取消翻页\r\n\t\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.next = false;\r\n\t\t\tthis.pre = false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 取消触摸\r\n\t\t **/\r\n\t\ttouchcancel() {\r\n\t\t\t//取消翻页,重置页面\r\n\t\t\tthis.showAnimation = false;\r\n\t\t\tthis.showShadow = false;\r\n\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\tthis.cover.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\tthis.next = false;\r\n\t\t\tthis.pre = false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 呼出菜单\r\n\t\t **/\r\n\t\tshowMenu() {\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tplus.navigator.setFullscreen(false);\r\n\t\t\t// #endif\r\n\t\t\tthis.menuShow = true;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.itemShow = true;\r\n\t\t\t}, 100);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 关闭菜单\r\n\t\t **/\r\n\t\tcloseMenu() {\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tplus.navigator.setFullscreen(true);\r\n\t\t\t// #endif\r\n\t\t\tthis.itemShow = false;\r\n\t\t\tthis.settingShow = false;\r\n\t\t\tthis.directoryShow = false;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.directoryShowBefore = false;\r\n\t\t\t\tthis.menuShow = false;\r\n\t\t\t}, 300);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 关闭菜单栏，呼出设置栏\r\n\t\t **/\r\n\t\topenSetting() {\r\n\t\t\tthis.itemShow = false;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.settingShow = true;\r\n\t\t\t}, 300);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 关闭菜单栏，呼出目录栏\r\n\t\t **/\r\n\t\topenDirectory() {\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tplus.navigator.setFullscreen(true);\r\n\t\t\t// #endif\r\n\t\t\tthis.itemShow = false;\r\n\t\t\tthis.directoryShowBefore = true;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.directoryShow = true;\r\n\t\t\t}, 300);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 拖动进度条\r\n\t\t **/\r\n\t\tslideChanging(e) {\r\n\t\t\tthis.progressTouched = true;\r\n\t\t\tthis.chapterProgress = e.detail.value;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 结束拖动进度条\r\n\t\t **/\r\n\t\tasync slideChange(e) {\r\n\t\t\tthis.chapterProgress = e.detail.value;\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中'\r\n\t\t\t});\r\n\t\t\tawait this.getThreeChapter(e.detail.value);\r\n\t\t\tthis.progressTouched = false;\r\n\t\t\tthis.goToPage(0);\r\n\t\t\tuni.hideLoading();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 上一页,页面轮换\r\n\t\t **/\r\n\t\tgoPrePage() {\r\n\t\t\tif (this.prePage.isCover) {\r\n\t\t\t\t//如果是首页\r\n\t\t\t\tthis.cover.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.prePage.ready && !this.preChapter.ready) {\r\n\t\t\t\tthis.waitForPre = true;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在准备上一章',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet showChapter = false;\r\n\t\t\tthis.currentPage -= 1;\r\n\t\t\tif (this.currentPage === -1) {\r\n\t\t\t\t//翻至上一章了\r\n\t\t\t\tshowChapter = true;\r\n\t\t\t\tthis.currentPage = this.preChapter.totalPage - 1;\r\n\t\t\t\tthis.chapterRotate('pre');\r\n\t\t\t}\r\n\r\n\t\t\tlet cur = [].concat(this.curPage.pageTranslate);\r\n\t\t\tlet pre = [].concat(this.prePage.pageTranslate);\r\n\t\t\tthis.goToPage(this.currentPage);\r\n\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\tthis.curPage.pageTranslate = pre;\r\n\t\t\tthis.nextPage.pageTranslate = cur;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (showChapter) {\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ttitle: this.curChapter.chapterName,\r\n\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t// })\r\n\t\t\t\t}\r\n\t\t\t\tthis.showAnimation = true;\r\n\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\t}, 50);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 下一页,页面轮换\r\n\t\t **/\r\n\t\tgoNextPage() {\r\n\t\t\tif (this.nextPage.isEnd) {\r\n\t\t\t\t//如果翻至本书末尾\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '没有了',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.nextPage.ready && !this.nextChapter.ready) {\r\n\t\t\t\tthis.waitForNext = true;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在准备下一章',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.currentPage += 1;\r\n\t\t\tlet showChapter = false;\r\n\t\t\tif (this.currentPage === this.curChapter.totalPage) {\r\n\t\t\t\t//翻至下一章了\r\n\t\t\t\tshowChapter = true;\r\n\t\t\t\tthis.currentPage = 0;\r\n\t\t\t\tthis.chapterRotate('next');\r\n\t\t\t}\r\n\r\n\t\t\tlet cur = [].concat(this.curPage.pageTranslate);\r\n\t\t\tlet next = [].concat(this.nextPage.pageTranslate);\r\n\t\t\tthis.goToPage(this.currentPage);\r\n\t\t\tthis.prePage.pageTranslate = cur;\r\n\t\t\tthis.curPage.pageTranslate = next;\r\n\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (showChapter) {\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ttitle: this.curChapter.chapterName,\r\n\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t// })\r\n\t\t\t\t}\r\n\t\t\t\tthis.showAnimation = true;\r\n\t\t\t\tthis.prePage.pageTranslate = [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`];\r\n\t\t\t\tthis.curPage.pageTranslate = [`(0,0)`, `(0,0)`, `(0,0)`];\r\n\t\t\t\tthis.nextPage.pageTranslate = [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`];\r\n\t\t\t}, 50);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 章节轮换\r\n\t\t **/\r\n\t\tasync chapterRotate(type) {\r\n\t\t\tif (type === 'next') {\r\n\t\t\t\tthis.preChapter = Object.assign({}, this.curChapter);\r\n\t\t\t\tthis.curChapter = Object.assign({}, this.nextChapter);\r\n\t\t\t\tif (this.curChapter.chapterIndex !== this.directoryList.length - 1) {\r\n\t\t\t\t\t//最后一章是根据目录列表长度判断\r\n\t\t\t\t\tthis.nextChapter = {\r\n\t\t\t\t\t\tready: false,\r\n\t\t\t\t\t\tchapterIndex: this.curChapter.chapterIndex + 1,\r\n\t\t\t\t\t\tchapterName: this.directoryList[this.curChapter.chapterIndex + 1].name\r\n\t\t\t\t\t};\r\n\t\t\t\t\tawait this.getOneChapter(this.directoryList[this.curChapter.chapterIndex + 1].chapterid);\r\n\t\t\t\t\tthis.$set(this.nextChapter, 'text', this.tmpChapter.text);\r\n\t\t\t\t\tthis.$set(this.nextChapter, 'canRead', this.tmpChapter.canRead);\r\n\t\t\t\t\tthis.calcNextChapter();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.nextChapter = { ready: true, isEnd: true };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (type === 'pre') {\r\n\t\t\t\tthis.nextChapter = Object.assign({}, this.curChapter);\r\n\t\t\t\tthis.curChapter = Object.assign({}, this.preChapter);\r\n\t\t\t\tif (this.curChapter.chapterIndex !== 0) {\r\n\t\t\t\t\tthis.preChapter = {\r\n\t\t\t\t\t\tready: false,\r\n\t\t\t\t\t\tchapterIndex: this.curChapter.chapterIndex - 1,\r\n\t\t\t\t\t\tchapterName: this.directoryList[this.curChapter.chapterIndex - 1].name\r\n\t\t\t\t\t};\r\n\t\t\t\t\tawait this.getOneChapter(this.directoryList[this.curChapter.chapterIndex - 1].chapterid);\r\n\t\t\t\t\tthis.$set(this.preChapter, 'text', this.tmpChapter.text);\r\n\t\t\t\t\tthis.$set(this.preChapter, 'canRead', this.tmpChapter.canRead);\r\n\t\t\t\t\tthis.calcPreChapter();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.preChapter = { ready: true, isCover: true };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 跳转下一章\r\n\t\t **/\r\n\t\tgoNextChapter() {\r\n\t\t\tif (this.curChapter.chapterIndex === this.directoryList.length - 1) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已经是最后一章了',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.waitForNext || this.waitForPre) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.nextChapter.ready) {\r\n\t\t\t\tthis.chapterRotate('next');\r\n\t\t\t\tthis.goToPage(0);\r\n\t\t\t} else {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在准备下一章'\r\n\t\t\t\t});\r\n\t\t\t\tthis.waitForNextChapter = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 跳转上一章\r\n\t\t **/\r\n\t\tgoPreChapter(page) {\r\n\t\t\tif (this.curChapter.chapterIndex === 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '这是第一章',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.waitForNext || this.waitForPre) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.preChapter.ready) {\r\n\t\t\t\tthis.chapterRotate('pre');\r\n\t\t\t\tthis.goToPage(0);\r\n\t\t\t} else {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在准备上一章'\r\n\t\t\t\t});\r\n\t\t\t\tthis.waitForPreChapter = true;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 根据页码跳转\r\n\t\t **/\r\n\t\tgoToPage(page) {\r\n\t\t\tthis.currentPage = page;\r\n\t\t\tthis.showAnimation = false;\r\n\t\t\tthis.curPage = {\r\n\t\t\t\tready: this.curChapter.ready,\r\n\t\t\t\tchapterName: this.curChapter.chapterName,\r\n\t\t\t\ttext: this.curChapter.text,\r\n\t\t\t\tpageNum: this.currentPage,\r\n\t\t\t\ttotalPage: this.curChapter.totalPage,\r\n\t\t\t\tpageTranslate: [`(0,0)`, `(0,0)`, `(0,0)`],\r\n\t\t\t\tcanRead: this.curChapter.canRead\r\n\t\t\t};\r\n\t\t\tif (this.currentPage === 0) {\r\n\t\t\t\tif (this.preChapter.ready && this.preChapter.isCover) {\r\n\t\t\t\t\t//翻至封面了\r\n\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\tisCover: true,\r\n\t\t\t\t\t\tpageTranslate: [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`]\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\tready: this.preChapter.ready,\r\n\t\t\t\t\t\tchapterName: this.preChapter.chapterName,\r\n\t\t\t\t\t\ttext: this.preChapter.text,\r\n\t\t\t\t\t\tpageNum: this.preChapter.totalPage - 1,\r\n\t\t\t\t\t\ttotalPage: this.preChapter.totalPage,\r\n\t\t\t\t\t\tpageTranslate: [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`],\r\n\t\t\t\t\t\tcanRead: this.preChapter.canRead\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.prePage = {\r\n\t\t\t\t\tready: true,\r\n\t\t\t\t\tchapterName: this.curChapter.chapterName,\r\n\t\t\t\t\ttext: this.curChapter.text,\r\n\t\t\t\t\tpageNum: this.currentPage - 1,\r\n\t\t\t\t\ttotalPage: this.curChapter.totalPage,\r\n\t\t\t\t\tpageTranslate: [`(${-this.windowWidth}px,0)`, `(${-this.windowWidth}px,0)`, `(0,${-this.windowHeight}px)`],\r\n\t\t\t\t\tcanRead: this.curChapter.canRead\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (this.currentPage >= this.curChapter.totalPage - 1) {\r\n\t\t\t\tif (this.nextChapter.ready && this.nextChapter.isEnd) {\r\n\t\t\t\t\t//翻至最后一章了\r\n\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\tisEnd: true,\r\n\t\t\t\t\t\tpageTranslate: [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`]\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\tready: this.nextChapter.ready,\r\n\t\t\t\t\t\tchapterName: this.nextChapter.chapterName,\r\n\t\t\t\t\t\ttext: this.nextChapter.text,\r\n\t\t\t\t\t\tpageNum: 0,\r\n\t\t\t\t\t\ttotalPage: this.nextChapter.totalPage,\r\n\t\t\t\t\t\tpageTranslate: [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`],\r\n\t\t\t\t\t\tcanRead: this.nextChapter.canRead\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\tready: true,\r\n\t\t\t\t\tchapterName: this.curChapter.chapterName,\r\n\t\t\t\t\ttext: this.curChapter.text,\r\n\t\t\t\t\tpageNum: this.currentPage + 1,\r\n\t\t\t\t\ttotalPage: this.curChapter.totalPage,\r\n\t\t\t\t\tpageTranslate: [`(0,0)`, `(${this.windowWidth}px,0)`, `(0,${this.windowHeight}px)`],\r\n\t\t\t\t\tcanRead: this.curChapter.canRead\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 跳转到指定章节\r\n\t\t **/\r\n\t\tasync goToChapter(index) {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中'\r\n\t\t\t});\r\n\t\t\tthis.progressTouched = false;\r\n\t\t\tthis.closeMenu();\r\n\t\t\tawait this.getThreeChapter(index);\r\n\t\t\tthis.goToPage(0);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 加大字体\r\n\t\t **/\r\n\t\tasync bigSize() {\r\n\t\t\tlet progress = this.progress; //记录阅读进度用于调整字体后跳转\r\n\t\t\tthis.fontSize += 2;\r\n\t\t\tuni.setStorageSync('fontSize', this.fontSize);\r\n\t\t\tthis.calcHeight();\r\n\t\t\tawait this.calcCurChapter();\r\n\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * progress);\r\n\t\t\tthis.goToPage(page);\r\n\t\t\tif (this.preChapter.ready && !this.preChapter.isCover) {\r\n\t\t\t\tthis.preChapter.ready = false;\r\n\t\t\t\tawait this.calcPreChapter();\r\n\t\t\t}\r\n\t\t\tif (this.nextChapter.ready && !this.nextChapter.isEnd) {\r\n\t\t\t\tthis.nextChapter.ready = false;\r\n\t\t\t\tawait this.calcNextChapter();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 缩小字体\r\n\t\t **/\r\n\t\tasync smallSize() {\r\n\t\t\tlet progress = this.progress;\r\n\t\t\tthis.fontSize -= 2;\r\n\t\t\tuni.setStorageSync('fontSize', this.fontSize);\r\n\t\t\tthis.calcHeight();\r\n\t\t\tawait this.calcCurChapter();\r\n\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * progress);\r\n\t\t\tthis.goToPage(page);\r\n\t\t\tif (this.preChapter.ready && !this.preChapter.isCover) {\r\n\t\t\t\tthis.preChapter.ready = false;\r\n\t\t\t\tawait this.calcPreChapter();\r\n\t\t\t}\r\n\t\t\tif (this.nextChapter.ready && !this.nextChapter.isEnd) {\r\n\t\t\t\tthis.nextChapter.ready = false;\r\n\t\t\t\tawait this.calcNextChapter();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 切换繁体简体\r\n\t\t **/\r\n\t\tchangeFont(type) {\r\n\t\t\tif (type === 2) {\r\n\t\t\t\t//切换为繁体\r\n\t\t\t\tthis.preChapter.text = traditionalized(this.preChapter.text);\r\n\t\t\t\tthis.curChapter.text = traditionalized(this.curChapter.text);\r\n\t\t\t\tthis.nextChapter.text = traditionalized(this.nextChapter.text);\r\n\t\t\t\tthis.prePage.text = traditionalized(this.prePage.text);\r\n\t\t\t\tthis.curPage.text = traditionalized(this.curPage.text);\r\n\t\t\t\tthis.nextPage.text = traditionalized(this.nextPage.text);\r\n\t\t\t\tthis.simplified = 2;\r\n\t\t\t\tuni.setStorageSync('simplified', 2);\r\n\t\t\t} else {\r\n\t\t\t\t//切换为简体\r\n\t\t\t\tthis.preChapter.text = simplized(this.preChapter.text);\r\n\t\t\t\tthis.curChapter.text = simplized(this.curChapter.text);\r\n\t\t\t\tthis.nextChapter.text = simplized(this.nextChapter.text);\r\n\t\t\t\tthis.prePage.text = simplized(this.prePage.text);\r\n\t\t\t\tthis.curPage.text = simplized(this.curPage.text);\r\n\t\t\t\tthis.nextPage.text = simplized(this.nextPage.text);\r\n\t\t\t\tthis.simplified = 1;\r\n\t\t\t\tuni.setStorageSync('simplified', 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 改变行距\r\n\t\t **/\r\n\t\tasync changeLineHeight(lineHeight) {\r\n\t\t\tlet progress = this.progress;\r\n\t\t\tif (lineHeight === this.lineHeight) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.lineHeight = lineHeight;\r\n\t\t\t\tuni.setStorageSync('lineHeight', this.lineHeight);\r\n\t\t\t\tthis.calcHeight();\r\n\t\t\t\tawait this.calcCurChapter();\r\n\t\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * progress);\r\n\t\t\t\tthis.goToPage(page);\r\n\t\t\t\tif (this.preChapter.ready && !this.preChapter.isCover) {\r\n\t\t\t\t\tthis.preChapter.ready = false;\r\n\t\t\t\t\tawait this.calcPreChapter();\r\n\t\t\t\t}\r\n\t\t\t\tif (this.nextChapter.ready && !this.nextChapter.isEnd) {\r\n\t\t\t\t\tthis.nextChapter.ready = false;\r\n\t\t\t\t\tawait this.calcNextChapter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 改变翻页方式\r\n\t\t **/\r\n\t\tchangeTurnType(turnType) {\r\n\t\t\tif (turnType === this.turnType) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.showAnimation = false;\r\n\t\t\t\tthis.turnType = turnType;\r\n\t\t\t\tuni.setStorageSync('turnType', this.turnType);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 改变背景\r\n\t\t **/\r\n\t\tchangeBackground(background) {\r\n\t\t\tif (background === this.background) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.background = background;\r\n\t\t\t\tuni.setStorageSync('background', this.background);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取目录\r\n\t\t **/\r\n\t\tasync getDirectoryList(showLoading) {\r\n\t\t\tlet data=JSON.parse(plus.storage.getItem('mulu:'+this.bookId))\r\n\t\t\tconsole.log(data);\r\n\t\t\tdata.forEach((it, i) => {\r\n\t\t\t\tthis.directoryList.push({\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tchapter: i + 1,\r\n\t\t\t\t\tname: it.name?it.name:it.chaptername,\r\n\t\t\t\t\tchapterid: it.chapterid\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取一章数据\r\n\t\t **/\r\n\t\tgetOneChapter(chapterId, showLoading) {\r\n\t\t\t/*****************************************/\r\n\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t/*****************************************/\r\n\r\n\t\t\tif (showLoading) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tlet hastext = JSON.parse(plus.storage.getItem('zw:' + this.bookId + ':' + chapterId));\r\n\t\t\t\tconsole.log(hastext);\r\n\t\t\t\t\tthis.tmpChapter.text = hastext.content; //模拟数据\r\n\t\t\t\t\tif (this.simplified === 2) {\r\n\t\t\t\t\t\t//切换为繁体  注意：这里默认数据库中是简体字\r\n\t\t\t\t\t\tthis.tmpChapter.text = traditionalized(this.tmpChapter.text);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t}).then(\r\n\t\t\t\t() => {},\r\n\t\t\t\t() => {\r\n\t\t\t\t\t// 此处是网络连接失败的逻辑\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '出错了',\r\n\t\t\t\t\t\t\tcontent: '请重新导入',\r\n\t\t\t\t\t\t\tconfirmText: '重试',\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t/*****************************************/\r\n\t\t\t/*****************************************/\r\n\t\t\t/*****************************************/\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取三章数据\r\n\t\t **/\r\n\t\tasync getThreeChapter(index) {\r\n\t\t\tawait this.getOneChapter(this.directoryList[index].chapterid);\r\n\r\n\t\t\tthis.curChapter = {\r\n\t\t\t\tchapterIndex: index,\r\n\t\t\t\tchapterName: this.directoryList[index].name,\r\n\t\t\t\ttext: this.tmpChapter.text,\r\n\t\t\t\tcanRead: this.tmpChapter.canRead\r\n\t\t\t};\r\n\t\t\tif (this.curChapter.chapterIndex !== 0) {\r\n\t\t\t\tawait this.getOneChapter(this.directoryList[index - 1].chapterid);\r\n\t\t\t\tthis.preChapter = {\r\n\t\t\t\t\tchapterIndex: index - 1,\r\n\t\t\t\t\tchapterName: this.directoryList[index - 1].name,\r\n\t\t\t\t\ttext: this.tmpChapter.text,\r\n\t\t\t\t\tcanRead: this.tmpChapter.canRead\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.preChapter = { ready: true, isCover: true };\r\n\t\t\t}\r\n\r\n\t\t\tif (this.curChapter.chapterIndex !== this.directoryList.length - 1) {\r\n\t\t\t\tawait this.getOneChapter(this.directoryList[index + 1].chapterid);\r\n\t\t\t\tthis.nextChapter = {\r\n\t\t\t\t\tchapterIndex: index + 1,\r\n\t\t\t\t\tchapterName: this.directoryList[index + 1].name,\r\n\t\t\t\t\ttext: this.tmpChapter.text,\r\n\t\t\t\t\tcanRead: this.tmpChapter.canRead\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthis.nextChapter = { ready: true, isEnd: true };\r\n\t\t\t}\r\n\t\t\tawait this.calcCurChapter();\r\n\t\t\tawait this.calcPreChapter();\r\n\t\t\tawait this.calcNextChapter();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 购买书籍接口\r\n\t\t **/\r\n\t\tbuyBook() {\r\n\t\t\t//在回调中调用this.initPage()刷新本页\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '跳转至购买页面，如果未登陆则跳转登陆',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n/*每个页面公共css */\r\n@font-face {\r\n\tfont-family: 'iconfont'; /* project id 1997429 */\r\n\tsrc: url('https://at.alicdn.com/t/font_1997429_8xzvctxta3u.eot');\r\n\tsrc: url('https://at.alicdn.com/t/font_1997429_8xzvctxta3u.eot?#iefix') format('embedded-opentype'),\r\n\t\turl('https://at.alicdn.com/t/font_1997429_8xzvctxta3u.woff2') format('woff2'), url('https://at.alicdn.com/t/font_1997429_8xzvctxta3u.woff') format('woff'),\r\n\t\turl('https://at.alicdn.com/t/font_1997429_8xzvctxta3u.ttf') format('truetype'), url('https://at.alicdn.com/t/font_1997429_8xzvctxta3u.svg#iconfont') format('svg');\r\n}\r\n.iconfont {\r\n\tfont-family: 'iconfont' !important;\r\n\tfont-style: normal;\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-webkit-text-stroke-width: 0.2px;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n}\r\n*,\r\nview {\r\n\tbox-sizing: border-box;\r\n}\r\npage {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n.hidden {\r\n\topacity: 0;\r\n}\r\n.action {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\t.item {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t}\r\n}\r\n.container {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tdisplay: flex;\r\n\tflex-flow: column nowrap;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tpadding: 0px 20px;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tbackground-color: #fff;\r\n\toverflow: hidden;\r\n\t.chapter {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #746e65;\r\n\t\theight: 30px;\r\n\t\twidth: 100%;\r\n\t\tline-height: 30px;\r\n\t}\r\n\t.bottom-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #746e65;\r\n\t\theight: 30px;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.content {\r\n\t\tflex: 1 1 auto;\r\n\t\toverflow: hidden;\r\n\t\t.inner-box {\r\n\t\t\toverflow: hidden;\r\n\t\t\t.book-inner {\r\n\t\t\t\ttext-indent: 2em;\r\n\t\t\t\ttext-align: justify;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n.container0 {\r\n\tbackground: url(@/static/background1.jpg);\r\n\tbackground-color: #fff;\r\n\tbackground-size: 100% 100%;\r\n}\r\n.container1 {\r\n\tbackground-color: #000;\r\n}\r\n.menu {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tz-index: 300;\r\n\t// transition: all .3s;\r\n\t.menu-top {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #333;\r\n\t\ttransition: top 0.3s;\r\n\t\t.head {\r\n\t\t\tposition: relative;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 40px;\r\n\t\t\twidth: 100%;\r\n\t\t\tline-height: 40px;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t\t.back {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 10px;\r\n\t\t}\r\n\t}\r\n\t.directory {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column;\r\n\t\twidth: 600rpx;\r\n\t\theight: 100%;\r\n\t\ttransition: left 0.1s;\r\n\t\t.bookname {\r\n\t\t\tpadding: 20px 0 20px 10px;\r\n\t\t\theight: 60px;\r\n\t\t\tfont-size: 18px;\r\n\t\t}\r\n\t\t.directory-listItem {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding-left: 10px;\r\n\t\t\theight: 40px;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tborder-bottom: #eee solid 1px;\r\n\t\t}\r\n\t\t.active {\r\n\t\t\tcolor: red;\r\n\t\t}\r\n\t}\r\n\t.menu-bottom {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #333;\r\n\t\ttransition: bottom 0.3s;\r\n\t\tcolor: #fff;\r\n\t\t.show-chapter {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\ttop: 0;\r\n\t\t\ttransform: translate(-50%, -110%);\r\n\t\t\tpadding: 5px 10px;\r\n\t\t\tline-height: 20px;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tfont-size: 13px;\r\n\t\t\tbackground-color: #333;\r\n\t\t}\r\n\t\t.progress-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 0 20px;\r\n\t\t\theight: 50px;\r\n\t\t\twidth: 100%;\r\n\t\t\tfont-size: 15px;\r\n\t\t}\r\n\t\t.items-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 80px;\r\n\t\t\twidth: 100%;\r\n\t\t\t.item-box {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-flow: column;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.setting {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-around;\r\n\t\tpadding: 10px 20px;\r\n\t\twidth: 100%;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #333;\r\n\t\ttransition: bottom 0.3s;\r\n\t\t.item {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 70px;\r\n\t\t\t.item-name {\r\n\t\t\t\tpadding: 10px;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 14px;\r\n\t\t\t}\r\n\t\t\t.icon {\r\n\t\t\t\tmargin-right: 10px;\r\n\t\t\t\tpadding: 5px 20px;\r\n\t\t\t\tfont-size: 15px;\r\n\t\t\t\theight: 32px;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\twidth: auto;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tborder-radius: 20px;\r\n\t\t\t\tborder: #fff solid 1px;\r\n\t\t\t}\r\n\t\t\t.type-setting {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-right: 10px;\r\n\t\t\t\tpadding: 5px;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\twidth: 30px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\tborder: #fff solid 1px;\r\n\t\t\t\t.line {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tborder-bottom: #fff solid 1px;\r\n\t\t\t\t}\r\n\t\t\t\t.lineActive {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tborder-bottom: #ff9900 solid 1px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.active {\r\n\t\t\t\tcolor: #ff9900;\r\n\t\t\t\tborder: #ff9900 solid 1px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n.cover {\r\n\timage {\r\n\t\theight: 400rpx;\r\n\t\twidth: 300rpx;\r\n\t\tbackground-color: #eee;\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./localread.vue?vue&type=style&index=0&id=07d3c301&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX3.0\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./localread.vue?vue&type=style&index=0&id=07d3c301&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1620437202878\n      var cssReload = require(\"D:/Program Files/HBuilderX3.0/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}